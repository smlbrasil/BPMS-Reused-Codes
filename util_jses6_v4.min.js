var p001Form={Settings:{TimeOut:200,IsDebug:!0,DataSources:{GetCepData:{name:"P001 - Get CEP Data",value:"https://viacep.com.br/ws/{params}/json/"}}},NativeResources:{Loader:null},Functions:{IsNullOrEmptySpace:e=>{var t=!0;return null!=e&&null!=e&&(e.constructor==String&&""!=e.trim()&&e.trim().length>0&&(t=!1),e.constructor==Object&&e!={}&&(t=!1),e.constructor==Array&&e.length>0&&(t=!1)),t},WriteLogConsole:e=>{p001Form.Settings.IsDebug&&console.log(e)},BuildParamsToGetDataSource:e=>{var t="?";return Object.entries(e).forEach((e,r)=>{t+=r>0?"&":"",t+=e[0]+"="+e[1]}),t},GetFromOrquestraDataSource:async(e,t)=>{p001Form.NativeResources.Loader.element.style.display="block";var r="";let s="";var o={method:"GET",headers:new Headers,redirect:"follow"};t&&(s=p001Form.Functions.BuildParamsToGetDataSource(t));var a=e.value+("?"==s?"":s);return await fetch(a,o).then(t=>{const r=t.headers.get("content-type");return r&&-1!==r.indexOf("application/json")?t.json().then(t=>(p001Form.Functions.WriteLogConsole("Fonte de dados: "+e.name),p001Form.Functions.WriteLogConsole(t),t)).catch(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null)):t.text().then(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null))}).then(e=>{r=null!=e?e.success.length>1?e.success:e.success[0]:null}).catch(t=>{console.error("Fonte de dados: "+e.name),console.error(t),p001Form.NativeResources.Loader.dontShow(),cryo_alert("Erro na consulta da Fonte de dados <b>"+e.name+"</b>",t)}),p001Form.NativeResources.Loader.element.style.display="none",r},GetFromOtherDataSource:async(e,t)=>{p001Form.NativeResources.Loader.element.style.display="block";var r="";var s={method:"GET",headers:new Headers,redirect:"follow"},o=e.value.replace("{params}",t.value);return await fetch(o,s).then(t=>{const r=t.headers.get("content-type");return r&&-1!==r.indexOf("application/json")?t.json().then(t=>(p001Form.Functions.WriteLogConsole("Fonte de dados: "+e.name),p001Form.Functions.WriteLogConsole(t),t)).catch(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null)):t.text().then(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null))}).then(e=>{r=null!=e&&null!=e?null!=e.success&&null!=srt.success?e.success.length>1?e.success:e.success[0]:e:null}).catch(t=>{console.error("Fonte de dados: "+e.name),console.error(t),p001Form.NativeResources.Loader.dontShow(),cryo_alert("Erro na consulta da Fonte de dados <b>"+e.name+"</b>",t)}),p001Form.NativeResources.Loader.element.style.display="none",r},PostToOrquestraDataSource:async(e,t)=>{p001Form.NativeResources.Loader.element.style.display="block";var r="";var s={method:"POST",headers:new Headers,redirect:"follow",body:JSON.stringify(t)};return await fetch(e.value,s).then(t=>{const r=t.headers.get("content-type");return r&&-1!==r.indexOf("application/json")?t.json().then(t=>(p001Form.Functions.WriteLogConsole("Fonte de dados: "+e.name),p001Form.Functions.WriteLogConsole(t),t)).catch(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null)):t.text().then(t=>(console.error("Fonte de dados: "+e.name),console.error(t),null))}).then(e=>{r=null!=e?e.success.length>1?e.success:e.success[0]:null}).catch(t=>{console.error("Fonte de dados: "+e.name),console.error(t),p001Form.NativeResources.Loader.dontShow(),cryo_alert("Erro na consulta da Fonte de dados <b>"+e.name+"</b>",t)}),p001Form.NativeResources.Loader.element.style.display="none",r},CreateElementMapping:function(e){this.element=document.querySelector(e),null==this.element&&(e+="-1",this.element=document.querySelector(e)),this.originalDisplay="TABLE"==document.querySelector(e).tagName?"table":document.querySelector(e).style.display,this.dontShow=(()=>{if(this.element.style.display="none","INPUT"==this.element.tagName||"SELECT"==this.element.tagName||"TEXTAREA"==this.element.tagName){var e=p001Form.Functions.GetTdFields(this.element);e&&(e.style.visibility="hidden")}}),this.reveal=(()=>{if(this.element.style.display=this.originalDisplay,"INPUT"==this.element.tagName||"SELECT"==this.element.tagName||"TEXTAREA"==this.element.tagName){var e=p001Form.Functions.GetTdFields(this.element);e&&(e.style.visibility="visible")}}),this.dontRequire=(()=>{"INPUT"!=this.element.tagName&&"SELECT"!=this.element.tagName&&"TEXTAREA"!=this.element.tagName||this.element.setAttribute("required","N")}),this.require=(()=>{"INPUT"!=this.element.tagName&&"SELECT"!=this.element.tagName&&"TEXTAREA"!=this.element.tagName||this.element.setAttribute("required","S")}),this.readOnly=(()=>{"INPUT"!=this.element.tagName&&"TEXTAREA"!=this.element.tagName||(this.element.readOnly=!0),"SELECT"==this.element.tagName&&this.element.classList.add("readOnlyType")}),this.readEdit=(()=>{"INPUT"!=this.element.tagName&&"TEXTAREA"!=this.element.tagName||(this.element.readOnly=!1),"SELECT"==this.element.tagName&&this.element.classList.remove("readOnlyType")}),"checkbox"!=this.element.type&&"radio"!=this.element.type||(this.options=document.querySelectorAll("[xname="+e.replace("#","")+"]"))},MapDefaultElements:()=>{p001Form.NativeResources.Loader=new p001Form.Functions.CreateElementMapping(".app-overlay")},zeev_hideTables:(e,t)=>{function r(e,t){var r=0,s=document.getElementById(e);s&&(s.style.display="none",t&&("S"==s.getAttribute("mult")&&Array.from(s.tBodies[0].rows).forEach(e=>{r>1&&execv2.form.multipletable.deleteRow(e.querySelector('[id="btnDeletewRow"]')),r++}),Array.from(s.tBodies[0].rows).forEach(e=>{var t=e.querySelectorAll("input"),r=e.querySelectorAll("select"),s=e.querySelectorAll("textarea");t.length>0&&Array.from(t).forEach(t=>{var r=t.getAttribute("type"),s=t.getAttribute("xtype");if(r&&"BUTTON"!=r.toUpperCase()&&"HIDDEN"!=r.toUpperCase()&&("TEXT"==r.toUpperCase()&&(t.value=""),"RADIO"!=r.toUpperCase()&&"CHECKBOX"!=r.toUpperCase()||(t.checked=!1),s&&"FILE"==s.toUpperCase())){var o=e.querySelector("[title='Excluir']");o&&o.click()}}),r.length>0&&Array.from(r).forEach(e=>{e.value=""}),s.length>0&&Array.from(s).forEach(e=>{e.value=""})})),Array.from(s.tBodies[0].rows).forEach(e=>{var t=e.querySelectorAll("input"),r=e.querySelectorAll("select"),o=e.querySelectorAll("textarea"),a="";t.length>0&&Array.from(t).forEach(e=>{var t=e.getAttribute("type");a=null!=e.getAttribute("data-required")&&"true"==e.getAttribute("data-required")||null!=e.getAttribute("required")&&"S"==e.getAttribute("required"),t&&"BUTTON"!=t.toUpperCase()&&"HIDDEN"!=t.toUpperCase()&&(e.setAttribute("data-required",a),e.setAttribute("required","N"))}),r.length>0&&Array.from(r).forEach(e=>{a=null!=e.getAttribute("data-required")&&"true"==e.getAttribute("data-required")||null!=e.getAttribute("required")&&"S"==e.getAttribute("required"),e.setAttribute("data-required",a),e.setAttribute("required","N")}),o.length>0&&Array.from(o).forEach(e=>{a=null!=e.getAttribute("data-required")&&"true"==e.getAttribute("data-required")||null!=e.getAttribute("required")&&"S"==e.getAttribute("required"),e.setAttribute("data-required",a),e.setAttribute("required","N")}),"group"!=e.getAttribute("class")&&"S"!=s.getAttribute("mult")&&e.setAttribute("class","")}))}if(t=t||!1,""!=e)if(e.indexOf(",")>=0){var s=e.split(",");Array.from(s).forEach(e=>{r(e.trim(),t)})}else r(e.trim(),t)},zeev_showTables:e=>{function t(e){var t=document.getElementById(e);t&&(t.style.display="",Array.from(t.tBodies[0].rows).forEach(e=>{var r=e.querySelectorAll("input"),s=e.querySelectorAll("select"),o=e.querySelectorAll("textarea"),a="";r.length>0&&Array.from(r).forEach(e=>{var t=e.getAttribute("type");a=e.getAttribute("data-required"),t&&"BUTTON"!=t.toUpperCase()&&"HIDDEN"!=t.toUpperCase()&&null!=a&&"true"==a&&e.setAttribute("required","S")}),s.length>0&&Array.from(s).forEach(e=>{null!=(a=e.getAttribute("data-required"))&&"true"==a&&e.setAttribute("required","S")}),o.length>0&&Array.from(o).forEach(e=>{null!=(a=e.getAttribute("data-required"))&&"true"==a&&e.setAttribute("required","S")}),"group"!=e.getAttribute("class")&&"S"!=t.getAttribute("mult")&&"true"==a&&e.setAttribute("class","execute-required")}))}if(""!=e)if(e.indexOf(",")>=0){var r=e.split(",");Array.from(r).forEach(e=>{t(e.trim())})}else t(e.trim())},zeev_hideFields:e=>{var t,r,s,o,a,n,l,i;if(""!=e&&null!=e&&null!=e)if(e.indexOf(",")>=0){var u=e.replace(" ","").split(",");Array.from(u).forEach(e=>{if(t=document.querySelector('[xname="inp'+e.trim()+'"]'),s=null!=t.getAttribute("type")?t.getAttribute("type"):t.type,o=t.getAttribute("xtype"),a=p001Form.Functions.zeev_closest(t,"tr"),n=document.getElementById(`td0${e.trim()}`),l=document.getElementById(`td1${e.trim()}`),i=null!=t.getAttribute("data-required")&&"true"==t.getAttribute("data-required")||null!=t.getAttribute("required")&&"S"==t.getAttribute("required"),null==t.getAttribute("data-required")&&t.setAttribute("data-required",i),"hidden"!=s&&t.setAttribute("required","N"),s&&"BUTTON"!=s.toUpperCase()&&"HIDDEN"!=s.toUpperCase()&&("TEXT"==s.toUpperCase()&&(t.value=""),"SELECT"==s.toUpperCase()&&(t.value=""),"RADIO"!=s.toUpperCase()&&"CHECKBOX"!=s.toUpperCase()||(r=document.querySelectorAll('[xname="inp'+e.trim()+'"]'),Array.from(r).forEach(e=>{e.checked=!1})),"TEXTAREA"==s.toUpperCase()&&(t.value=""),o&&"FILE"==o.toUpperCase())){var u=a.querySelector("[title='Excluir']");u&&u.click()}"HIDDEN"==s.toUpperCase()?n&&l&&(n.style.display="none",l.style.display="none"):a&&(a.style.display="none"),a&&"group"!=a.getAttribute("class")&&a.setAttribute("class","")})}else{if(t=document.querySelector('[xname="inp'+e+'"]'),s=null!=t.getAttribute("type")?t.getAttribute("type"):t.type,o=t.getAttribute("xtype"),a=p001Form.Functions.zeev_closest(t,"tr"),n=document.getElementById(`td0${e.trim()}`),l=document.getElementById(`td1${e.trim()}`),i=null!=t.getAttribute("data-required")&&"true"==t.getAttribute("data-required")||null!=t.getAttribute("required")&&"S"==t.getAttribute("required"),null==t.getAttribute("data-required")&&t.setAttribute("data-required",i),"hidden"!=s&&t.setAttribute("required","N"),s&&"BUTTON"!=s.toUpperCase()&&"HIDDEN"!=s.toUpperCase()&&("TEXT"==s.toUpperCase()&&(t.value=""),"SELECT"!=s.toUpperCase()&&"SELECT-ONE"!=s.toUpperCase()||(t.value=""),"RADIO"!=s.toUpperCase()&&"CHECKBOX"!=s.toUpperCase()||(r=document.querySelectorAll('[xname="inp'+e.trim()+'"]'),Array.from(r).forEach(e=>{e.checked=!1})),"TEXTAREA"==s.toUpperCase()&&(t.value=""),o&&"FILE"==o.toUpperCase())){var d=a.querySelector("[title='Excluir']");d&&d.click()}"HIDDEN"==s.toUpperCase()?n&&l&&(n.style.display="none",l.style.display="none"):a&&(a.style.display="none"),a&&"group"!=a.getAttribute("class")&&a.setAttribute("class","")}},zeev_showFields:e=>{var t,r,s,o,a,n;if(""!=e&&null!=e&&null!=e)if(e.indexOf(",")>=0){var l=e.replace(" ","").split(",");Array.from(l).forEach(e=>{t=document.querySelector('[xname="inp'+e.trim()+'"]'),r=null!=t.getAttribute("type")?t.getAttribute("type"):t.type,s=p001Form.Functions.zeev_closest(t,"tr"),o=document.getElementById(`td0${e.trim()}`),a=document.getElementById(`td1${e.trim()}`),"true"==(n=t.getAttribute("data-required"))&&"HIDDEN"!=r.toUpperCase()&&t.setAttribute("required","S"),"HIDDEN"==r.toUpperCase()?o&&a&&(o.style.display="",a.style.display=""):s&&(s.style.display=""),s&&"true"==n&&"group"!=s.getAttribute("class")&&s.setAttribute("class","execute-required")})}else t=document.querySelector('[xname="inp'+e+'"]'),r=null!=t.getAttribute("type")?t.getAttribute("type"):t.type,s=p001Form.Functions.zeev_closest(t,"tr"),o=document.getElementById(`td0${e.trim()}`),a=document.getElementById(`td1${e.trim()}`),"true"==(n=t.getAttribute("data-required"))&&"HIDDEN"!=r.toUpperCase()&&t.setAttribute("required","S"),"HIDDEN"==r.toUpperCase()?o&&a&&(o.style.display="",a.style.display=""):s&&(s.style.display=""),s&&"true"==n&&"group"!=s.getAttribute("class")&&s.setAttribute("class","execute-required")},zeev_closest:(e,t)=>e?e.nodeName==t.toUpperCase()?e:p001Form.Functions.zeev_closest(e.parentElement,t):null,zevv_phoneMask:(e,t)=>{var r,s,o,a=e.value.replace(/[^\d]+/g,"");""!=a&&null!=a&&null!=a&&(t?a.length>12?(pais=a.substr(0,2),r=a.substr(2,2),s=a.substr(4,5),o=a.substr(-4),a=`+${pais}(${r}) ${s}-${o}`):12===a.length&&(pais=a.substr(0,2),r=a.substr(2,2),s=a.substr(4,4),o=a.substr(-4),a=`+${pais}(${r}) ${s}-${o}`):a.length>10?(r=a.substr(0,2),s=a.substr(2,5),o=a.substr(-4),a=`(${r}) ${s}-${o}`):10===a.length&&(r=a.substr(0,2),s=a.substr(2,4),o=a.substr(-4),a=`(${r}) ${s}-${o}`),e.value=a)},zeev_showOrHideSelectOptions:(e,t,r,s,o)=>{var a,n,l;s?(a=document.getElementById(o),Array.from(a.tBodies[0].rows).forEach(s=>{(n=s.querySelector('[xname="inp'+e+'"]'))&&n.length>0&&Array.from(n).forEach(e=>{t.indexOf(",")>=0?(l=t.split(","),Array.from(l).forEach(t=>{t.toUpperCase()==e.text.toUpperCase()&&("HIDE"==r.toUpperCase()?(e.disabled=!0,e.style.display="none"):(e.disabled=!1,e.style.display="block"))})):e.text.toUpperCase()==t.toUpperCase()&&("HIDE"==r.toUpperCase()?(e.disabled=!0,e.style.display="none"):(e.disabled=!1,e.style.display="block"))})})):(n=document.querySelector('[xname="inp'+e+'"]')).length>0&&Array.from(n).forEach(e=>{t.indexOf(",")>=0?(l=t.split(","),Array.from(l).forEach(t=>{t.toUpperCase()==e.text.toUpperCase()&&("HIDE"==r.toUpperCase()?(e.disabled=!0,e.style.display="none"):(e.disabled=!1,e.style.display="block"))})):e.text.toUpperCase()==t.toUpperCase()&&("HIDE"==r.toUpperCase()?(e.disabled=!0,e.style.display="none"):(e.disabled=!1,e.style.display="block"))})},zeev_isRequired:(e,t)=>{var r=document.querySelector("[xname='inp"+e+"']"),s=zeev_closest(r,"tr");t?(r.setAttribute("required","S"),s.setAttribute("class","execute-required")):(r.setAttribute("required","N"),s.setAttribute("class",""))},zeev_makeDate:(e,t)=>{var r=e.split(t);return r[2]+"/"+r[1]+"/"+r[0]},zeev_appendMessageField:(e,t,r,s)=>{var o=document.getElementById(r),a=document.createElement("span");a.setAttribute("id",r),t&&r&&(a.innerText=t,a.style.fontWeight="bold",a.style.color="red"),""==e.value?(e.style.border="",o&&o.remove()):s?(o&&o.remove(),e.style.border="1px solid green"):(o&&o.remove(),e.style.border="1px solid red",e.parentElement.appendChild(a))},sml_checkCPF:e=>{var t=e.value;if(""==(t=t.replace(/[^\d]+/g,""))&&(p001Form.Functions.sml_appendMessageField(e,"CPF invalido!","spanCpfMessage",!1),e.value=""),11!=t.length||"00000000000"==t||"11111111111"==t||"22222222222"==t||"33333333333"==t||"44444444444"==t||"55555555555"==t||"66666666666"==t||"77777777777"==t||"88888888888"==t||"99999999999"==t)p001Form.Functions.sml_appendMessageField(e,"CPF invalido!","spanCpfMessage",!1),e.value="";else{for(add=0,i=0;i<9;i++)add+=parseInt(t.charAt(i))*(10-i);if(rev=11-add%11,10!=rev&&11!=rev||(rev=0),rev!=parseInt(t.charAt(9)))p001Form.Functions.sml_appendMessageField(e,"CPF invalido!","spanCpfMessage",!1),e.value="";else{for(add=0,i=0;i<10;i++)add+=parseInt(t.charAt(i))*(11-i);rev=11-add%11,10!=rev&&11!=rev||(rev=0),rev!=parseInt(t.charAt(10))?(p001Form.Functions.sml_appendMessageField(e,"CPF invalido!","spanCpfMessage",!1),e.value=""):p001Form.Functions.sml_appendMessageField(e,"","spanCpfMessage",!0)}}},sml_checkCNPJ:e=>{if(cnpj=e.value.replace(/\./gi,"").replace(/\//gi,"").replace(/-/gi,""),console.log(cnpj),!cnpj||14!=cnpj.length||"00000000000000"==cnpj||"11111111111111"==cnpj||"22222222222222"==cnpj||"33333333333333"==cnpj||"44444444444444"==cnpj||"55555555555555"==cnpj||"66666666666666"==cnpj||"77777777777777"==cnpj||"88888888888888"==cnpj||"99999999999999"==cnpj)return p001Form.Functions.sml_appendMessageField(e,"CNPJ invalido!","spanCnpjMessage",!1),e.value="",!1;for(var t=cnpj.length-2,r=cnpj.substring(0,t),s=cnpj.substring(t),o=0,a=t-7,n=t;n>=1;n--)o+=r.charAt(t-n)*a--,a<2&&(a=9);var l=o%11<2?0:11-o%11;if(l!=s.charAt(0))return p001Form.Functions.sml_appendMessageField(e,"CNPJ invalido!","spanCnpjMessage",!1),e.value="",!1;t+=1,r=cnpj.substring(0,t),o=0,a=t-7;for(n=t;n>=1;n--)o+=r.charAt(t-n)*a--,a<2&&(a=9);return(l=o%11<2?0:11-o%11)!=s.charAt(1)?(p001Form.Functions.sml_appendMessageField(e,"CNPJ invalido!","spanCnpjMessage",!1),e.value="",!1):(p001Form.Functions.sml_appendMessageField(e,"","spanCnpjMessage",!0),!0)},zeev_confirm:(e,t)=>{$.colorbox({closeButton:!1,width:clientIsMobile?"90%":"400px",html:`\n                <div class="cryo-confirm-dialog padded">\n                    <h3>${e}</h3>\n                    <div class="spaced text-right">\n                        <button type="button" class="btn btn-success${clientIsMobile?"btn-large":""}" accesskey="${mlLblYesAccessKey}">${mlLblYes}</button>\n                        <button type="button" class="btn btn-default${clientIsMobile?"btn-large":""}" accesskey="${mlLblNoAccessKey}">${mlLblNo}</button>\n                    </div>\n                </div>\n                `}),cryo_UnderlineAccessKey("div.cryo-confirm-dialog"),$(".cryo-confirm-dialog").find(".btn-success").focus(),$(".cryo-confirm-dialog").find(".btn-success").click(function(){$.colorbox.close(),t()}),$(".cryo-confirm-dialog").find(".btn-default").click(function(){$.colorbox.close()})},zeev_alert:(e,t)=>{e=e.replace(/\n/g,"<br>"),$.colorbox({closeButton:!1,width:clientIsMobile?"90%":"400px",html:`\n                <div class="cryo-confirm-dialog padded">\n                    <h2>${mlLblAtention}</h2>\n                    <p>${e}</p>\n                    <div class="spaced text-right">\n                        <button type="button" class="btn btn-success${clientIsMobile?"btn-large":""}">OK</button>\n                    </div>\n                </div>\n                `}),cryo_UnderlineAccessKey("div.cryo-confirm-dialog"),$(".cryo-confirm-dialog").find(".btn-success").focus(),$(".cryo-confirm-dialog").find(".btn-success").click(function(){$.colorbox.close(),null!=t&&null!=t&&t()})},PageRulesByTask:async e=>{switch(e.toUpperCase()){case"T01":console.log("CurrentTask: "+e);break;default:document.getElementById("inpcep").addEventListener("blur",function(){let e={value:this.value.replace(/\D/g,"")};p001Form.Functions.GetFromOtherDataSource(p001Form.Settings.DataSources.GetCepData,e).then(e=>{e?(document.getElementById("inplogradouro").value=e.logradouro,document.getElementById("inpcomplemento").value=e.complemento,document.getElementById("inpbairro").value=e.bairro,document.getElementById("inpcidade").value=e.localidade,document.getElementById("inpuf").value=e.uf):(this.value="",document.getElementById("inplogradouro").value="",document.getElementById("inpcomplemento").value="",document.getElementById("inpbairro").value="",document.getElementById("inpcidade").value="",document.getElementById("inpuf").value="",p001Form.Functions.zeev_alert("Cep não encontrado!"))})}),console.log("CurrentTask: "+e)}},Init:()=>{document.getElementById("commands").parentNode.style.display="none",document.getElementById("ContainerForm").parentNode.classList.remove("col-lg-10"),document.getElementById("ContainerForm").parentNode.classList.add("col-lg-12"),p001Form.Functions.MapDefaultElements(),p001Form.Functions.PageRulesByTask(document.getElementById("inpDsFlowElementAlias").value)}}};